

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tutorials &mdash; pyWitness 1.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/pyWitnessFavicon.png"/>
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Advanced tutorials" href="tutorials_adv.html" />
    <link rel="prev" title="Introduction" href="introduction.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> pyWitness
          

          
            
            <img src="_static/pyWitnessLogo200.jpg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="licence.html">Licence &amp; Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="authorship.html">Authorship</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#python">Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="#loading-raw-experimental-data">Loading raw experimental data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#checking-and-exploring-loaded-data">Checking and exploring loaded data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#processing-raw-experimental-data">Processing raw experimental data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plotting-roc-curves">Plotting ROC curves</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plotting-cac-curves">Plotting CAC curves</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plotting-rac-curves">Plotting RAC curves</a></li>
<li class="toctree-l2"><a class="reference internal" href="#collapsing-the-catagorical-data">Collapsing the catagorical data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#collapsing-binning-continuous-data">Collapsing (binning) continuous data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#calculating-pauc-and-performing-statistical-tests">Calculating pAUC and performing statistical tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fitting-signal-detection-based-models-to-data">Fitting signal detection-based models to data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setting-initial-fit-parameters">Setting initial fit parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#checking-the-convergence-of-fit">Checking the convergence of fit</a></li>
<li class="toctree-l2"><a class="reference internal" href="#loading-and-saving-fit-parameters-for-later-use">Loading and saving fit parameters for later use</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plotting-fit-and-models">Plotting fit and models</a></li>
<li class="toctree-l2"><a class="reference internal" href="#d-prime-calculation">d-prime calculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#writing-results-to-file">Writing results to file</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials_adv.html">Advanced tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials_dev.html">Developer tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="results.html">Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="moduledocs.html">Module Contents</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pyWitness</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Tutorials</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/tutorials.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tutorials">
<h1>Tutorials<a class="headerlink" href="#tutorials" title="Permalink to this headline">¶</a></h1>
<p>Click on the <a class="reference external" href="https://github.com/lmickes/pyWitness/releases/tag/v1.0">repository link</a> to download the zip file, called <strong>tutorialData.zip</strong>, of the data you’ll need to run through the tutorials.</p>
<p>Make a working directory and change directory <code class="docutils literal notranslate"><span class="pre">cd</span></code> to that directory to do the tutorials.</p>
<p>This tutorial builds up! Between each example and the previous examples, the new lines of code are highlighted in yellow.</p>
<div class="section" id="python">
<h2>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h2>
<p>Python is an interpreted object oriented programming language. There is a large range
of modules that are imported into python to provide extra functionality or features.
pyWitness uses numpy (numerical arrays), scipy (fitting and functions), pandas
(data frames), matplotlib (plotting), openpyxl (reading/writing excel),
xlrd (reading/writing excel), and numba (compiler to speed up code).</p>
<p>Python is best started from a terminal/command prompt</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ipython3 --pylab</span>
</pre></div>
</div>
<p>This then lands you in a python console window</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Python 3.7.9 (default, Sep  6 2020, 16:32:30)</span>
<span class="go">Type &#39;copyright&#39;, &#39;credits&#39; or &#39;license&#39; for more information</span>
<span class="go">IPython 7.14.0 -- An enhanced Interactive Python. Type &#39;?&#39; for help.</span>

<span class="go">In [1]:</span>
</pre></div>
</div>
<p>Commands can now be typed in to execute python and pyWitness commands. Here are some helpful tips
to speed up inputing commands</p>
<blockquote>
<div><ul class="simple">
<li><p>Cut and paste commands (to reduce typos)</p></li>
<li><p>Use the command history (up and down cursor arrows) to find commands that were used previously</p></li>
<li><p>Use command history with search (so try <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">pyW</span></code> and then up arrow. This will search the
command history with that command fragment and probably match with a previous <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">pyWitness</span></code></p></li>
<li><p>A command can be completed by using <code class="docutils literal notranslate"><span class="pre">tab</span></code>. Try typing in <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">pyW</span></code> and then pressing <code class="docutils literal notranslate"><span class="pre">tab</span></code></p></li>
<li><p>To get help on a command, type the function and then <code class="docutils literal notranslate"><span class="pre">?</span></code> for example, <code class="docutils literal notranslate"><span class="pre">dp.plotROC?</span></code></p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="loading-raw-experimental-data">
<h2>Loading raw experimental data<a class="headerlink" href="#loading-raw-experimental-data" title="Permalink to this headline">¶</a></h2>
<p>Remember to activate pyWitness when you start a terminal by using this code</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">activate</span> <span class="n">pyWitness</span>
</pre></div>
</div>
<p>A single Python class <a class="reference external" href="./moduledocs.html#pyWitness.DataRaw">pyWitness.DataRaw</a> is used to load raw data in
either <code class="docutils literal notranslate"><span class="pre">csv</span></code> or <code class="docutils literal notranslate"><span class="pre">excel</span></code> format. The format of <code class="docutils literal notranslate"><span class="pre">test1.csv</span></code> is the same as that described in the introduction.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="checking-and-exploring-loaded-data">
<h2>Checking and exploring loaded data<a class="headerlink" href="#checking-and-exploring-loaded-data" title="Permalink to this headline">¶</a></h2>
<p>It is useful to understand what columns and data values are stored in the raw data.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="linenos">2</span><span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="hll"><span class="linenos">3</span><span class="n">dr</span><span class="o">.</span><span class="n">checkData</span><span class="p">()</span>
</span></pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">DataRaw.checkData&gt;</span>
<span class="go">DataRaw.checkData&gt; columns      : [&#39;Unnamed: 0&#39; &#39;participantId&#39; &#39;lineupSize&#39; &#39;targetLineup&#39; &#39;responseType&#39; &#39;confidence&#39; &#39;responseTime&#39;]</span>
<span class="go">DataRaw.checkData&gt; lineupSize   : [6]</span>
<span class="go">DataRaw.checkData&gt; targetLineup : [&#39;targetAbsent&#39; &#39;targetPresent&#39;]</span>
<span class="go">DataRaw.checkData&gt; responseType : [&#39;fillerId&#39; &#39;rejectId&#39; &#39;suspectId&#39;]</span>
<span class="go">DataRaw.checkData&gt; confidence   : [  0  10  20  30  40  50  60  70  80  90 100]</span>
</pre></div>
</div>
<p>If the unique values for a non-mandatory column are required then this can be displayed using</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="linenos">2</span><span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="hll"><span class="linenos">3</span><span class="n">dr</span><span class="o">.</span><span class="n">columnvalues</span><span class="p">(</span><span class="s2">&quot;responseTime&quot;</span><span class="p">)</span>
</span></pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">DataRaw.columnValues&gt;           : responseTime [  1159   1175   1248 ... 402689 502420 651073]</span>
</pre></div>
</div>
</div>
<div class="section" id="processing-raw-experimental-data">
<h2>Processing raw experimental data<a class="headerlink" href="#processing-raw-experimental-data" title="Permalink to this headline">¶</a></h2>
<p>To process the raw data the function <a class="reference external" href="./moduledocs.html#pyWitness.DataRaw.process">pyWitness.DataRaw.process</a>
needs to be called on a raw data object. This calculates the cumulative rates from the raw data.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="linenos">2</span><span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="hll"><span class="linenos">3</span><span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
</span></pre></div>
</div>
<p>Once <a class="reference external" href="./moduledocs.html#pyWitness.DataRaw.process">pyWitness.DataRaw.process</a> is called two <code class="docutils literal notranslate"><span class="pre">DataFrames</span></code> are
created. One contains a pivot table and the other contains rates.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="linenos">2</span><span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="linenos">3</span><span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
<span class="hll"><span class="linenos">4</span><span class="n">dp</span><span class="o">.</span><span class="n">printPivot</span><span class="p">()</span>
</span><span class="hll"><span class="linenos">5</span><span class="n">dp</span><span class="o">.</span><span class="n">printRates</span><span class="p">()</span>
</span></pre></div>
</div>
<p>You should see the following output of the <code class="docutils literal notranslate"><span class="pre">dp.printPivot()</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">                           confidence</span>
<span class="go">confidence                        0    10   20    30    40    50    60    70    80    90    100</span>
<span class="go">targetLineup  responseType</span>
<span class="go">targetAbsent  fillerId            3.0  7.0  7.0  11.0  16.0  26.0  30.0  31.0  19.0  13.0  10.0</span>
<span class="go">              rejectId            4.0  5.0  5.0   6.0  11.0  28.0  39.0  57.0  75.0  46.0  66.0</span>
<span class="go">targetPresent fillerId            2.0  1.0  3.0   4.0  10.0   9.0   9.0  17.0  16.0   6.0   4.0</span>
<span class="go">              rejectId            4.0  3.0  NaN   9.0  10.0  23.0  11.0  19.0  25.0  18.0  25.0</span>
<span class="go">              suspectId           3.0  1.0  4.0   5.0  11.0  19.0  44.0  77.0  55.0  37.0  47.0</span>
</pre></div>
</div>
<p>And you should see the following output for <code class="docutils literal notranslate"><span class="pre">dp.printRates()</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">                           confidence</span>
<span class="go">confidence                        100       90        80        70        60        50        40        30        20        10        0</span>
<span class="go">targetLineup  responseType</span>
<span class="go">cac                          0.965753  0.944681  0.945559  0.937120  0.897959  0.814286  0.804878  0.731707  0.774194  0.461538  0.857143</span>
<span class="go">rf                           0.146660  0.118031  0.175289  0.247614  0.147664  0.070316  0.041185  0.020593  0.015570  0.006529  0.010547</span>
<span class="go">targetAbsent  fillerId       0.019417  0.044660  0.081553  0.141748  0.200000  0.250485  0.281553  0.302913  0.316505  0.330097  0.335922</span>
<span class="go">              rejectId       0.128155  0.217476  0.363107  0.473786  0.549515  0.603883  0.625243  0.636893  0.646602  0.656311  0.664078</span>
<span class="go">              suspectId      0.003236  0.007443  0.013592  0.023625  0.033333  0.041748  0.046926  0.050485  0.052751  0.055016  0.055987</span>
<span class="go">targetPresent fillerId       0.007533  0.018832  0.048964  0.080979  0.097928  0.114878  0.133710  0.141243  0.146893  0.148776  0.152542</span>
<span class="go">              rejectId       0.047081  0.080979  0.128060  0.163842  0.184557  0.227872  0.246704  0.263653       NaN  0.269303  0.276836</span>
<span class="go">              suspectId      0.088512  0.158192  0.261770  0.406780  0.489642  0.525424  0.546139  0.555556  0.563089  0.564972  0.570621</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the example there is no <code class="docutils literal notranslate"><span class="pre">suspectId</span></code> for <code class="docutils literal notranslate"><span class="pre">targetAbsent</span></code> lineups. Here the <code class="docutils literal notranslate"><span class="pre">targetAbsent.suspectId</span></code> is estimated as <code class="docutils literal notranslate"><span class="pre">targetAbsent.fillerId/lineupSize</span></code></p>
</div>
</div>
<div class="section" id="plotting-roc-curves">
<h2>Plotting ROC curves<a class="headerlink" href="#plotting-roc-curves" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="linenos">2</span><span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="linenos">3</span><span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
<span class="hll"><span class="linenos">4</span><span class="n">dp</span><span class="o">.</span><span class="n">plotROC</span><span class="p">()</span>
</span></pre></div>
</div>
<div class="figure align-default">
<img alt="ROC for test1.csv" src="_images/test1_roc.jpg" />
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The symbol size is the relative frequency and can be changed by setting <code class="docutils literal notranslate"><span class="pre">dp.plotROC(relativeFrequencyScale</span> <span class="pre">=</span> <span class="pre">400)</span></code></p>
</div>
<p>The black dashed line in the plot represents chance performance.</p>
</div>
<div class="section" id="plotting-cac-curves">
<h2>Plotting CAC curves<a class="headerlink" href="#plotting-cac-curves" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="linenos">2</span><span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="linenos">3</span><span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
<span class="hll"><span class="linenos">4</span><span class="n">dp</span><span class="o">.</span><span class="n">plotCAC</span><span class="p">()</span>
</span></pre></div>
</div>
<div class="figure align-default">
<img alt="CAC for test1.csv" src="_images/test1_cac.jpg" />
</div>
</div>
<div class="section" id="plotting-rac-curves">
<h2>Plotting RAC curves<a class="headerlink" href="#plotting-rac-curves" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="collapsing-the-catagorical-data">
<h2>Collapsing the catagorical data<a class="headerlink" href="#collapsing-the-catagorical-data" title="Permalink to this headline">¶</a></h2>
<p>The data used example in this tutorial has 11 confidence levels (0, 10, 20, 30, 40, 50, 60, 70, 80, 90 and 100). Often
confidence levels need to be binned or collapsed. This is best performed on the raw data before calling
<code class="docutils literal notranslate"><span class="pre">process()</span></code>. This is done with the <code class="docutils literal notranslate"><span class="pre">collapseCategoricalData</span></code> method of <code class="docutils literal notranslate"><span class="pre">DataRaw</span></code>. This is shown in example below,
where the new bins are (0-60 map to 30, 70-80 to 75 and 90-100 to 95).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="linenos">2</span><span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="hll"><span class="linenos">3</span><span class="n">dr</span><span class="o">.</span><span class="n">collapseCategoricalData</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s1">&#39;confidence&#39;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">4</span>                           <span class="nb">map</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">20</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">50</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">60</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">5</span>                                <span class="mi">70</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">80</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">6</span>                                <span class="mi">90</span><span class="p">:</span> <span class="mi">95</span><span class="p">,</span> <span class="mi">100</span><span class="p">:</span> <span class="mi">95</span><span class="p">})</span>
</span><span class="linenos">7</span><span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
<span class="linenos">8</span><span class="n">dp</span><span class="o">.</span><span class="n">plotCAC</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="Rebinned CAC for test1.csv" src="_images/test1_rebinned.jpg" />
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you err the <code class="docutils literal notranslate"><span class="pre">collapseCategoricalData</span></code> the data might be inconsistent. To start with the original data so
call <code class="docutils literal notranslate"><span class="pre">collapseCategoricalData</span></code> with <code class="docutils literal notranslate"><span class="pre">reload=True</span></code></p>
</div>
</div>
<div class="section" id="collapsing-binning-continuous-data">
<h2>Collapsing (binning) continuous data<a class="headerlink" href="#collapsing-binning-continuous-data" title="Permalink to this headline">¶</a></h2>
<p>Some data are not categorical variables but continuous variables.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="linenos">2</span><span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="hll"><span class="linenos">3</span><span class="n">dr</span><span class="o">.</span><span class="n">collapseContinuousData</span><span class="p">(</span><span class="n">column</span> <span class="o">=</span> <span class="s2">&quot;confidence&quot;</span><span class="p">,</span><span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="n">labels</span><span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
</span><span class="linenos">4</span><span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
<span class="linenos">5</span><span class="n">dp</span><span class="o">.</span><span class="n">plotROC</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">labels=None</span></code> can be used and the bins will be automatically labelled</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The bend edges are exclusive of the low edge and inclusive of the high edge</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">confidence</span></code> column is relabelled to <code class="docutils literal notranslate"><span class="pre">confidence-original</span></code> and <code class="docutils literal notranslate"><span class="pre">confidence</span></code> is filled with labels. Here is an example of the raw data
(<code class="docutils literal notranslate"><span class="pre">dr.data</span></code>) after binning.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">      Unnamed: 0  participantId  lineupSize   targetLineup responseType  confidence_original confidence  responseTime</span>
<span class="go">0              0              1           6   targetAbsent     fillerId                   60          1          8330</span>
<span class="go">1              1              2           6   targetAbsent     fillerId                   70          2         27624</span>
<span class="go">2              2              3           6  targetPresent    suspectId                   60          1          3140</span>
<span class="go">3              3              4           6   targetAbsent     rejectId                   80          2          8833</span>
<span class="go">4              4              5           6  targetPresent    suspectId                   70          2          9810</span>
<span class="go">...          ...            ...         ...            ...          ...                  ...        ...           ...</span>
<span class="go">1041        1041           1042           6  targetPresent    suspectId                   70          2         24910</span>
<span class="go">1042        1042           1043           6  targetPresent    suspectId                   70          2         15683</span>
<span class="go">1043        1043           1044           6   targetAbsent     fillerId                   70          2          1175</span>
<span class="go">1044        1044           1045           6  targetPresent    suspectId                   70          2          2308</span>
<span class="go">1045        1045           1046           6   targetAbsent     fillerId                   90          3         18185</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Confidence needs to be a numerical value because ROC analysis requires a value that can be ordered.</p>
</div>
</div>
<div class="section" id="calculating-pauc-and-performing-statistical-tests">
<h2>Calculating pAUC and performing statistical tests<a class="headerlink" href="#calculating-pauc-and-performing-statistical-tests" title="Permalink to this headline">¶</a></h2>
<p>pAUC is calculated when <code class="docutils literal notranslate"><span class="pre">dr.process()</span></code> is called. Simpson’s rule integrates the area
under the ROC curve up to a maximum value. If the maximum value is between two data points, linear interpolation is used
to calculate the most liberal point (i.e., the lowest level of confidence).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="linenos">2</span><span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="linenos">3</span><span class="n">dr</span><span class="o">.</span><span class="n">collapseContinuousData</span><span class="p">(</span><span class="n">column</span> <span class="o">=</span> <span class="s2">&quot;confidence&quot;</span><span class="p">,</span><span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="n">labels</span><span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="linenos">4</span><span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
<span class="hll"><span class="linenos">5</span><span class="nb">print</span><span class="p">(</span><span class="n">dp</span><span class="o">.</span><span class="n">pAUC</span><span class="p">)</span>
</span></pre></div>
</div>
</div>
<div class="section" id="fitting-signal-detection-based-models-to-data">
<h2>Fitting signal detection-based models to data<a class="headerlink" href="#fitting-signal-detection-based-models-to-data" title="Permalink to this headline">¶</a></h2>
<p>There are many models available in pyWitness. We’ll start with the independent observation model. To load and process
the data is the same as before</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="linenos">2</span><span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="linenos">3</span><span class="n">dr</span><span class="o">.</span><span class="n">collapseContinuousData</span><span class="p">(</span><span class="n">column</span> <span class="o">=</span> <span class="s2">&quot;confidence&quot;</span><span class="p">,</span><span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="n">labels</span><span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="linenos">4</span><span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
<span class="hll"><span class="linenos">5</span><span class="n">mf</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">ModelFitIndependentObservation</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span>
</span><span class="hll"><span class="linenos">6</span><span class="n">mf</span><span class="o">.</span><span class="n">setEqualVariance</span><span class="p">()</span>
</span><span class="hll"><span class="linenos">7</span><span class="n">mf</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
</span></pre></div>
</div>
<p>Line 9 sets the parameters for the fit. To display the fit parameters there is a function printParameters so</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="linenos"> 2</span><span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="linenos"> 3</span><span class="n">dr</span><span class="o">.</span><span class="n">collapseContinuousData</span><span class="p">(</span><span class="n">column</span> <span class="o">=</span> <span class="s2">&quot;confidence&quot;</span><span class="p">,</span><span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="n">labels</span><span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="linenos"> 4</span><span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
<span class="linenos"> 5</span><span class="n">mf</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">ModelFitIndependentObservation</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span>
<span class="hll"><span class="linenos"> 6</span><span class="n">mf</span><span class="o">.</span><span class="n">printParameters</span><span class="p">()</span>
</span><span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="n">mf</span><span class="o">.</span><span class="n">setEqualVariance</span><span class="p">()</span>
<span class="hll"><span class="linenos"> 9</span><span class="n">mf</span><span class="o">.</span><span class="n">printParameters</span><span class="p">()</span>
</span><span class="linenos">10</span>
<span class="linenos">11</span><span class="n">mf</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="hll"><span class="linenos">12</span><span class="n">mf</span><span class="o">.</span><span class="n">printParameters</span><span class="p">()</span>
</span></pre></div>
</div>
<p>After creating the <code class="docutils literal notranslate"><span class="pre">mf</span></code> object (line 9) the parameters are at their default values and free</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">lureMean 0.0 (free)</span>
<span class="go">lureSigma 1.0 (free)</span>
<span class="go">targetMean 1.0 (free)</span>
<span class="go">targetSigma 1.0 (free)</span>
<span class="go">lureBetweenSigma 0.0 (free)</span>
<span class="go">targetBetweenSigma 0.0 (free)</span>
<span class="go">c1 1.0 (free)</span>
<span class="go">c2 1.5 (free)</span>
<span class="go">c3 2.0 (free)</span>
</pre></div>
</div>
<p>Typically you would want to control the fit parameters. <code class="docutils literal notranslate"><span class="pre">setEqualVariance</span></code> sets some default model which is
an appropriate start; line 12 yields</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">lureMean 0.0 (fixed)</span>
<span class="go">lureSigma 1.0 (fixed targetSigma)</span>
<span class="go">targetMean 1.0 (free)</span>
<span class="go">targetSigma 1.0 (fixed)</span>
<span class="go">lureBetweenSigma 0.3 (fixed targetBetweenSigma)</span>
<span class="go">targetBetweenSigma 0.3 (free)</span>
<span class="go">c1 1.0 (free)</span>
<span class="go">c2 1.5 (free)</span>
<span class="go">c3 2.0 (free)</span>
</pre></div>
</div>
<p>Comparing these two fit parameters settings</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">lureSigma</span></code> is forced to be equal to <code class="docutils literal notranslate"><span class="pre">targetSigma</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">targetSigma</span></code> is fixed to its current value</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lureBetweenSigma</span></code> is fixed to <code class="docutils literal notranslate"><span class="pre">targetBetweenSigma</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">targetBetweenSigma</span></code> is fixed to its current value</p></li>
</ul>
</div></blockquote>
<p>After running the fit the parameters are updated so the output of line 15 in the code example gives</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">lureMean 0.0 (fixed)</span>
<span class="go">lureSigma 1.0 (fixed targetSigma)</span>
<span class="go">targetMean 1.6644667559751338 (free)</span>
<span class="go">targetSigma 1.0 (fixed)</span>
<span class="go">lureBetweenSigma 0.47633248791026106 (fixed targetBetweenSigma)</span>
<span class="go">targetBetweenSigma 0.47633248791026106 (free)</span>
<span class="go">c1 1.3610178212548698 (free)</span>
<span class="go">c2 1.8627517728791307 (free)</span>
<span class="go">c3 2.5659741783090464 (free)</span>
</pre></div>
</div>
<p>There many ways to control the model</p>
<table class="colwidths-given docutils align-default" id="id2">
<caption><span class="caption-text">Parameter control examples</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mf.lureMean.value</span> <span class="pre">=</span> <span class="pre">-0.1</span></code></p></td>
<td><p>Sets the lure mean parameter to -0.1</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">mf.targetMean.fixed</span> <span class="pre">=</span> <span class="pre">True</span></code></p></td>
<td><p>Fixed the parameter so it cannot change during a fit</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mf.lureMean.fixed</span> <span class="pre">=</span> <span class="pre">False</span></code></p></td>
<td><p>Unfixes the parameter so it will be free in a fit</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">mf.c1.set_equal(mf.c2)</span></code></p></td>
<td><p>Locks <code class="docutils literal notranslate"><span class="pre">c1</span></code> and <code class="docutils literal notranslate"><span class="pre">c2</span></code> together</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mf.lureBetweenSigma.unset_equal()</span></code></p></td>
<td><p>Release the linking of lureBetweenSigma and targetBetweenSigma</p></td>
</tr>
</tbody>
</table>
<p>There are multiple fits available and they all have the same interface they differ in
the construction line</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="linenos">2</span><span class="n">dr</span><span class="o">.</span><span class="n">collapseContinuousData</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s2">&quot;confidence&quot;</span><span class="p">)</span>
<span class="linenos">3</span><span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
<span class="linenos">4</span>
<span class="hll"><span class="linenos">5</span><span class="n">mf_io</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">ModelFitIndependentObservation</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span>
</span><span class="hll"><span class="linenos">6</span><span class="n">mf_br</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">ModelFitBestRest</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span>
</span><span class="hll"><span class="linenos">7</span><span class="n">mf_en</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">ModelFitEnsemble</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span>
</span><span class="hll"><span class="linenos">8</span><span class="n">mf_in</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">ModelFitIntegration</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span>
</span></pre></div>
</div>
</div>
<div class="section" id="setting-initial-fit-parameters">
<h2>Setting initial fit parameters<a class="headerlink" href="#setting-initial-fit-parameters" title="Permalink to this headline">¶</a></h2>
<p>With data samples with large number of confidence bins the fits can take a large
number of iterations to converge (long run times). Sensible fit parameters can be be
estimated from the data.</p>
<p>To estimate the target mean <span class="math notranslate nohighlight">\(\mu_t\)</span> and sigma <span class="math notranslate nohighlight">\(\sigma_t\)</span> the following relation is used</p>
<div class="math notranslate nohighlight">
\[Z(R_{T,i}) = \frac{Z(R_{L,i})- \mu_t}{\sigma_t}\]</div>
<p>Rearranging gives</p>
<div class="math notranslate nohighlight">
\[\sigma_t Z(R_{T,i}) = Z(R_{L,i}) - \mu_s\]</div>
<p>There is a linear relationship between target and lure <span class="math notranslate nohighlight">\(Z\)</span> values. This can be plotted
and a linear fit used to estimate the gradient and intercept.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="linenos">2</span><span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="linenos">3</span><span class="n">dr</span><span class="o">.</span><span class="n">collapseContinuousData</span><span class="p">(</span><span class="n">column</span> <span class="o">=</span> <span class="s2">&quot;confidence&quot;</span><span class="p">,</span><span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="n">labels</span><span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="linenos">4</span><span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
<span class="hll"><span class="linenos">5</span><span class="n">dp</span><span class="o">.</span><span class="n">plotHitVsFalseAlarmRate</span><span class="p">()</span>
</span></pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="linenos"> 2</span><span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="linenos"> 3</span><span class="n">dr</span><span class="o">.</span><span class="n">collapseContinuousData</span><span class="p">(</span><span class="n">column</span> <span class="o">=</span> <span class="s2">&quot;confidence&quot;</span><span class="p">,</span><span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="n">labels</span><span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="linenos"> 4</span><span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
<span class="linenos"> 5</span><span class="n">mf</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">ModelFitIndependentObservation</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span>
<span class="linenos"> 6</span><span class="n">mf</span><span class="o">.</span><span class="n">printParameters</span><span class="p">()</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="n">mf</span><span class="o">.</span><span class="n">setEqualVariance</span><span class="p">()</span>
<span class="hll"><span class="linenos"> 9</span><span class="n">mf</span><span class="o">.</span><span class="n">setParameterEstimates</span><span class="p">()</span>
</span><span class="linenos">10</span><span class="n">mf</span><span class="o">.</span><span class="n">printParameters</span><span class="p">()</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="n">mf</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="linenos">13</span><span class="n">mf</span><span class="o">.</span><span class="n">printParameters</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="checking-the-convergence-of-fit">
<h2>Checking the convergence of fit<a class="headerlink" href="#checking-the-convergence-of-fit" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="loading-and-saving-fit-parameters-for-later-use">
<h2>Loading and saving fit parameters for later use<a class="headerlink" href="#loading-and-saving-fit-parameters-for-later-use" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="plotting-fit-and-models">
<h2>Plotting fit and models<a class="headerlink" href="#plotting-fit-and-models" title="Permalink to this headline">¶</a></h2>
<p>It is important to understand the performance of a given particular fit. The following plot compares
the experimental data to the model fit.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="linenos">2</span><span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="linenos">3</span><span class="n">dr</span><span class="o">.</span><span class="n">collapseContinuousData</span><span class="p">(</span><span class="n">column</span> <span class="o">=</span> <span class="s2">&quot;confidence&quot;</span><span class="p">,</span><span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="n">labels</span><span class="o">=</span> <span class="kc">None</span><span class="p">)</span>
<span class="linenos">4</span><span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
<span class="linenos">5</span><span class="n">dp</span><span class="o">.</span><span class="n">calculateConfidenceBootstrap</span><span class="p">(</span><span class="n">nBootstraps</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
<span class="linenos">6</span><span class="n">mf</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">ModelFitIndependentObservation</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span>
<span class="linenos">7</span><span class="n">mf</span><span class="o">.</span><span class="n">setEqualVariance</span><span class="p">()</span>
<span class="linenos">8</span><span class="n">mf</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
</pre></div>
</div>
<p>To compare a <em>ROC</em> plot between data and fit</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dp</span><span class="o">.</span><span class="n">plotROC</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Data&quot;</span><span class="p">)</span>
<span class="n">mf</span><span class="o">.</span><span class="n">plotROC</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Indep. obs. fit&quot;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">_plt</span>
<span class="n">_plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="Data-model ROC comparision for test1.csv" src="_images/test1_fitDataROCComparision.jpg" />
</div>
<p>To compare a <em>CAC</em> plot between data and fit</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dp</span><span class="o">.</span><span class="n">plotCAC</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Data&quot;</span><span class="p">)</span>
<span class="n">mf</span><span class="o">.</span><span class="n">plotCAC</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Indep. obs. fit&quot;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="n">_plt</span>
<span class="n">_plt</span><span class="o">.</span><span class="n">legend</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="Data-model CAC comparision for test1.csv" src="_images/test1_fitDataCACComparision.jpg" />
</div>
<p>To compare frequencies in each bin between data and fit</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mf</span><span class="o">.</span><span class="n">plotFit</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="Data-model comparision for test1.csv" src="_images/test1_fitPlot.jpg" />
</div>
<p>Once a fit has been performed, the model can be displayed as a function of memory strenth and includes the lure and target
distributions and the associated criteria. This a simple command belonging to a ModelFit object can be used to
make the plot below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mf</span><span class="o">.</span><span class="n">plotModel</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="Independent Observation model fit." src="_images/test1_model.jpg" />
</div>
</div>
<div class="section" id="d-prime-calculation">
<h2>d-prime calculation<a class="headerlink" href="#d-prime-calculation" title="Permalink to this headline">¶</a></h2>
<p>The d-prime can be calculated by computing</p>
<div class="math notranslate nohighlight">
\[d^{\prime} = Z(R_{T,i}) - Z(R_{L,i})\]</div>
<p>where <span class="math notranslate nohighlight">\(R_{T,i}\)</span> is the cumulative rate for targets (<span class="math notranslate nohighlight">\(T\)</span>) with confidence <span class="math notranslate nohighlight">\(i\)</span>, <span class="math notranslate nohighlight">\(R_{L,i}\)</span> is the cumulative
rate for lures (<span class="math notranslate nohighlight">\(L\)</span>) with confidence <span class="math notranslate nohighlight">\(i\)</span> and <span class="math notranslate nohighlight">\(Z\)</span> is the inverse normal CDF. This can be evaluated for every
confidence bin, but there are conventions for lineups and showups. For all confidence levels <span class="math notranslate nohighlight">\(d^{\prime}\)</span> is stored in the rates
dataframe, so <code class="docutils literal notranslate"><span class="pre">dp.printRates()</span></code> gives</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="go">                           confidence</span>
<span class="linenos"> 2</span><span class="go">confidence                          3          2          1</span>
<span class="linenos"> 3</span><span class="go">targetLineup  responseType</span>
<span class="linenos"> 4</span><span class="go">cac           central        0.956357   0.940618   0.839228</span>
<span class="linenos"> 5</span><span class="go">confidence    central       95.588235  74.859335  44.778068</span>
<span class="hll"><span class="linenos"> 6</span><span class="go">dprime        central        1.433207   1.748223   1.767339</span>
</span><span class="linenos"> 7</span><span class="go">rf                           0.264691   0.422903   0.312406</span>
<span class="linenos"> 8</span><span class="go">targetAbsent  fillerId       0.044660   0.141748   0.335922</span>
<span class="linenos"> 9</span><span class="go">              rejectId       0.217476   0.473786   0.664078</span>
<span class="linenos">10</span><span class="go">              suspectId      0.007443   0.023625   0.055987</span>
<span class="linenos">11</span><span class="go">targetPresent fillerId       0.018832   0.080979   0.152542</span>
<span class="linenos">12</span><span class="go">              rejectId       0.080979   0.163842   0.276836</span>
<span class="linenos">13</span><span class="go">              suspectId      0.158192   0.406780   0.570621</span>
</pre></div>
</div>
<dl class="simple">
<dt>A member variable <code class="docutils literal notranslate"><span class="pre">dPrime</span></code> in <code class="docutils literal notranslate"><span class="pre">DataProcessed</span></code> is set according to</dt><dd><ul class="simple">
<li><p>Lineup convention <span class="math notranslate nohighlight">\(d^{\prime}\)</span> is the lowest confidence (most liberal) so <code class="docutils literal notranslate"><span class="pre">dp.dPrime</span></code> is <code class="docutils literal notranslate"><span class="pre">1.767339</span></code></p></li>
<li><p>Showup convention <span class="math notranslate nohighlight">\(d^{\prime}\)</span> is the lowest positive confidence</p></li>
</ul>
</dd>
</dl>
<p><span class="math notranslate nohighlight">\(d\)</span> can also be calculated from a signal detection model so</p>
<div class="math notranslate nohighlight">
\[d = \frac{\mu_{T} - \mu_{L}}{ \sqrt{\frac{\sigma_T^2 + \sigma_L^2}{2}} }\]</div>
<p>This is calculated from the fit parameters for the fits described in the previous section so</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">In [X]: mf.d</span>
<span class="go">Out[X]: 1.6671878567242588</span>
</pre></div>
</div>
</div>
<div class="section" id="writing-results-to-file">
<h2>Writing results to file<a class="headerlink" href="#writing-results-to-file" title="Permalink to this headline">¶</a></h2>
<p>The internal dataframes can be written to either <code class="docutils literal notranslate"><span class="pre">csv</span></code> or <code class="docutils literal notranslate"><span class="pre">xlsx</span></code> file format for further analysis. There are four
functions belonging to <code class="docutils literal notranslate"><span class="pre">DataProcessed</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">writePivotExcel</span></code> writes the pivot table to excel</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">writePivotCsv</span></code> writes the pivot table to csv</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">writeRatesExcel</span></code> writes the cummulative rates table to excel</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">writeRatesCsv</span></code> writes the cummulative rates table to csv</p></li>
</ul>
</div></blockquote>
<p>The string argument for the functions is the file name.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="linenos">2</span><span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="linenos">3</span><span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
<span class="hll"><span class="linenos">4</span><span class="n">dp</span><span class="o">.</span><span class="n">writePivotExcel</span><span class="p">(</span><span class="s2">&quot;test1_pivot.xlsx&quot;</span><span class="p">)</span>
</span><span class="hll"><span class="linenos">5</span><span class="n">dp</span><span class="o">.</span><span class="n">writePivotCsv</span><span class="p">(</span><span class="s2">&quot;test1_pivot.csv&quot;</span><span class="p">)</span>
</span><span class="hll"><span class="linenos">6</span><span class="n">dp</span><span class="o">.</span><span class="n">writeRatesExcel</span><span class="p">(</span><span class="s2">&quot;test1_rates.xlsx&quot;</span><span class="p">)</span>
</span><span class="hll"><span class="linenos">7</span><span class="n">dp</span><span class="o">.</span><span class="n">writeRatesCsv</span><span class="p">(</span><span class="s2">&quot;test1_rates.csv&quot;</span><span class="p">)</span>
</span></pre></div>
</div>
<div class="figure align-default">
<img alt="_images/test1_pivot_excel.jpg" src="_images/test1_pivot_excel.jpg" />
</div>
<div class="figure align-default">
<img alt="_images/test1_rates_excel.jpg" src="_images/test1_rates_excel.jpg" />
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tutorials_adv.html" class="btn btn-neutral float-right" title="Advanced tutorials" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introduction.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Royal Holloway, University of London 2020 and University of Bristol 2020
      <span class="lastupdated">
        Last updated on Mar 14, 2022.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>