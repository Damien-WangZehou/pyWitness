

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tutorials &mdash; pyWitness 0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Advanced tutorials" href="tutorials_adv.html" />
    <link rel="prev" title="Introduction" href="introduction.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> pyWitness
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="licence.html">Licence &amp; Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="authorship.html">Authorship</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#loading-raw-experimental-data">Loading raw experimental data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#processing-raw-experimental-data">Processing raw experimental data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plotting-roc-curves">Plotting ROC curves</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plotting-cac-curves">Plotting CAC curves</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plotting-rac-curves">Plotting RAC curves</a></li>
<li class="toctree-l2"><a class="reference internal" href="#collapsing-the-catagorical-data">Collapsing the catagorical data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#collapsing-binning-continuous-data">Collapsing (binning) continuous data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#calculating-pauc-and-performing-statistical-tests">Calculating pAUC and performing statistical tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fitting-signal-detection-models-to-data">Fitting signal detection models to data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plotting-fit-and-models">Plotting fit and models</a></li>
<li class="toctree-l2"><a class="reference internal" href="#writing-results-to-file">Writing results to file</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials_adv.html">Advanced tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials_dev.html">Developer tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="moduledocs.html">Module Contents</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pyWitness</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Tutorials</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/tutorials.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tutorials">
<h1>Tutorials<a class="headerlink" href="#tutorials" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The data files used in this tutorial are stored in <code class="docutils literal notranslate"><span class="pre">pyWitness/data/tutorial/</span></code>. It is a good idea to copy these files to your working
directory change directoy <code class="docutils literal notranslate"><span class="pre">cd</span></code> to that directory. This tutorial builds up! Between each example and previous examples the new lines of
code are highlighted in yellow.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">error bars, Processing raw experimental data for a particular experimental condition, Calculating pAUC and performing statistical tests,
Fitting signal detection models to data</p>
</div>
<div class="section" id="loading-raw-experimental-data">
<h2>Loading raw experimental data<a class="headerlink" href="#loading-raw-experimental-data" title="Permalink to this headline">¶</a></h2>
<p>A single Python class <a class="reference external" href="./moduledocs.html#pyWitness.DataRaw">pyWitness.DataRaw</a> is used to load raw data in either <code class="docutils literal notranslate"><span class="pre">csv</span></code> or <code class="docutils literal notranslate"><span class="pre">excel</span></code> format. The format of <code class="docutils literal notranslate"><span class="pre">test1.csv</span></code> is the same as that described in the introduction.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="processing-raw-experimental-data">
<h2>Processing raw experimental data<a class="headerlink" href="#processing-raw-experimental-data" title="Permalink to this headline">¶</a></h2>
<p>To process the raw data the function <a class="reference external" href="./moduledocs.html#pyWitness.DataRaw.process">pyWitness.DataRaw.process</a> needs to be called on a raw data object. The calculates the cumulative rates from the raw data.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="hll"><span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
</span></pre></div>
</td></tr></table></div>
<p>Once <a class="reference external" href="./moduledocs.html#pyWitness.DataRaw.process">pyWitness.DataRaw.process</a> is called two <code class="docutils literal notranslate"><span class="pre">DataFrames</span></code> are created one which contains a pivot table and another that contains rates</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
<span class="hll"><span class="n">dp</span><span class="o">.</span><span class="n">printPivot</span><span class="p">()</span>
</span><span class="hll"><span class="n">dp</span><span class="o">.</span><span class="n">printRates</span><span class="p">()</span>
</span></pre></div>
</td></tr></table></div>
<p>You should see  the output of the <code class="docutils literal notranslate"><span class="pre">dp.printPivot()</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">                           confidence</span>
<span class="go">confidence                        0    10   20    30    40    50    60    70    80    90    100</span>
<span class="go">targetLineup  responseType</span>
<span class="go">targetAbsent  fillerId            3.0  7.0  7.0  11.0  16.0  26.0  30.0  31.0  19.0  13.0  10.0</span>
<span class="go">              rejectId            4.0  5.0  5.0   6.0  11.0  28.0  39.0  57.0  75.0  46.0  66.0</span>
<span class="go">targetPresent fillerId            2.0  1.0  3.0   4.0  10.0   9.0   9.0  17.0  16.0   6.0   4.0</span>
<span class="go">              rejectId            4.0  3.0  NaN   9.0  10.0  23.0  11.0  19.0  25.0  18.0  25.0</span>
<span class="go">              suspectId           3.0  1.0  4.0   5.0  11.0  19.0  44.0  77.0  55.0  37.0  47.0</span>
</pre></div>
</div>
<p>And you should see the following for <code class="docutils literal notranslate"><span class="pre">dp.printRates()</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">                           confidence</span>
<span class="go">confidence                        100       90        80        70        60        50        40        30        20        10        0</span>
<span class="go">targetLineup  responseType</span>
<span class="go">cac                          0.965753  0.944681  0.945559  0.937120  0.897959  0.814286  0.804878  0.731707  0.774194  0.461538  0.857143</span>
<span class="go">rf                           0.146660  0.118031  0.175289  0.247614  0.147664  0.070316  0.041185  0.020593  0.015570  0.006529  0.010547</span>
<span class="go">targetAbsent  fillerId       0.019417  0.044660  0.081553  0.141748  0.200000  0.250485  0.281553  0.302913  0.316505  0.330097  0.335922</span>
<span class="go">              rejectId       0.128155  0.217476  0.363107  0.473786  0.549515  0.603883  0.625243  0.636893  0.646602  0.656311  0.664078</span>
<span class="go">              suspectId      0.003236  0.007443  0.013592  0.023625  0.033333  0.041748  0.046926  0.050485  0.052751  0.055016  0.055987</span>
<span class="go">targetPresent fillerId       0.007533  0.018832  0.048964  0.080979  0.097928  0.114878  0.133710  0.141243  0.146893  0.148776  0.152542</span>
<span class="go">              rejectId       0.047081  0.080979  0.128060  0.163842  0.184557  0.227872  0.246704  0.263653       NaN  0.269303  0.276836</span>
<span class="go">              suspectId      0.088512  0.158192  0.261770  0.406780  0.489642  0.525424  0.546139  0.555556  0.563089  0.564972  0.570621</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In the example there is no <code class="docutils literal notranslate"><span class="pre">suspectId</span></code> for <code class="docutils literal notranslate"><span class="pre">targetAbsent</span></code> lineups. Here the <code class="docutils literal notranslate"><span class="pre">targetAbsent.suspectId</span></code> is estimated as <code class="docutils literal notranslate"><span class="pre">targetAbsent.fillerId/lineupSize</span></code></p>
</div>
</div>
<div class="section" id="plotting-roc-curves">
<h2>Plotting ROC curves<a class="headerlink" href="#plotting-roc-curves" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
<span class="hll"><span class="n">dp</span><span class="o">.</span><span class="n">plotROC</span><span class="p">()</span>
</span></pre></div>
</td></tr></table></div>
<div class="figure">
<img alt="ROC for test1.csv" src="_images/test1_roc.jpg" />
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The symbol size is the relative frequency and can be changed by setting <code class="docutils literal notranslate"><span class="pre">dp.plotROC(relativeFrequencyScale</span> <span class="pre">=</span> <span class="pre">400)</span></code></p>
</div>
</div>
<div class="section" id="plotting-cac-curves">
<h2>Plotting CAC curves<a class="headerlink" href="#plotting-cac-curves" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
<span class="hll"><span class="n">dp</span><span class="o">.</span><span class="n">plotCAC</span><span class="p">()</span>
</span></pre></div>
</td></tr></table></div>
<div class="figure">
<img alt="CAC for test1.csv" src="_images/test1_cac.jpg" />
</div>
</div>
<div class="section" id="plotting-rac-curves">
<h2>Plotting RAC curves<a class="headerlink" href="#plotting-rac-curves" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="collapsing-the-catagorical-data">
<h2>Collapsing the catagorical data<a class="headerlink" href="#collapsing-the-catagorical-data" title="Permalink to this headline">¶</a></h2>
<p>The example in this tutorial as 11 confidence levels (0, 10, 20, 30, 40, 50, 60, 70, 80, 90 and 100). Typically categorical confidence levels need to be binned or collapsed. This is best performed on the raw data before calling <code class="docutils literal notranslate"><span class="pre">process()</span></code>. This is done with the <code class="docutils literal notranslate"><span class="pre">collapseCategoricalData</span></code> method of <code class="docutils literal notranslate"><span class="pre">DataRaw</span></code>. This is shown in example below, where the new bins are (0-60 map to 30, 70-80 to 75 and 90-100 to 95).</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="hll"><span class="n">dr</span><span class="o">.</span><span class="n">collapseCategoricalData</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s1">&#39;confidence&#39;</span><span class="p">,</span>
</span><span class="hll">                           <span class="nb">map</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">20</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">50</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">60</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
</span><span class="hll">                                <span class="mi">70</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">80</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span>
</span><span class="hll">                                <span class="mi">90</span><span class="p">:</span> <span class="mi">95</span><span class="p">,</span> <span class="mi">100</span><span class="p">:</span> <span class="mi">95</span><span class="p">})</span>
</span><span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
<span class="n">dp</span><span class="o">.</span><span class="n">plotCAC</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<div class="figure">
<img alt="Rebinned CAC for test1.csv" src="_images/test1_rebinned.jpg" />
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you mess up the <code class="docutils literal notranslate"><span class="pre">collapseCategoricalData</span></code> the data might be inconsistent. To start with the original data so call <code class="docutils literal notranslate"><span class="pre">collapseCategoricalData</span></code> with <code class="docutils literal notranslate"><span class="pre">reload=True</span></code></p>
</div>
</div>
<div class="section" id="collapsing-binning-continuous-data">
<h2>Collapsing (binning) continuous data<a class="headerlink" href="#collapsing-binning-continuous-data" title="Permalink to this headline">¶</a></h2>
<p>Some data are not catagories for but a continuous variable.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="hll"><span class="n">dr</span><span class="o">.</span><span class="n">collapseContinuousData</span><span class="p">(</span><span class="n">column</span> <span class="o">=</span> <span class="s2">&quot;confidence&quot;</span><span class="p">,</span><span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="n">labels</span><span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
</span><span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
<span class="n">dp</span><span class="o">.</span><span class="n">plotROC</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>The <code class="docutils literal notranslate"><span class="pre">confidence</span></code> column is relabelled to <code class="docutils literal notranslate"><span class="pre">confidence-original</span></code> and <code class="docutils literal notranslate"><span class="pre">confidence</span></code> is filled with labels. The mean and
standard deviation is computed and filled in <code class="docutils literal notranslate"><span class="pre">confidence-mean</span></code> and <code class="docutils literal notranslate"><span class="pre">confidence-std</span></code>. Here is an example of the raw data
(<code class="docutils literal notranslate"><span class="pre">dr.data</span></code>) after binning.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">      Unnamed: 0  participantId  lineupSize   targetLineup responseType  confidence_original confidence  responseTime</span>
<span class="go">0              0              1           6   targetAbsent     fillerId                   60          1          8330</span>
<span class="go">1              1              2           6   targetAbsent     fillerId                   70          2         27624</span>
<span class="go">2              2              3           6  targetPresent    suspectId                   60          1          3140</span>
<span class="go">3              3              4           6   targetAbsent     rejectId                   80          2          8833</span>
<span class="go">4              4              5           6  targetPresent    suspectId                   70          2          9810</span>
<span class="go">...          ...            ...         ...            ...          ...                  ...        ...           ...</span>
<span class="go">1041        1041           1042           6  targetPresent    suspectId                   70          2         24910</span>
<span class="go">1042        1042           1043           6  targetPresent    suspectId                   70          2         15683</span>
<span class="go">1043        1043           1044           6   targetAbsent     fillerId                   70          2          1175</span>
<span class="go">1044        1044           1045           6  targetPresent    suspectId                   70          2          2308</span>
<span class="go">1045        1045           1046           6   targetAbsent     fillerId                   90          3         18185</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The confidence needs to be a numerical value as ROC analysis requires a value which can be ordered.</p>
</div>
</div>
<div class="section" id="calculating-pauc-and-performing-statistical-tests">
<h2>Calculating pAUC and performing statistical tests<a class="headerlink" href="#calculating-pauc-and-performing-statistical-tests" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="fitting-signal-detection-models-to-data">
<h2>Fitting signal detection models to data<a class="headerlink" href="#fitting-signal-detection-models-to-data" title="Permalink to this headline">¶</a></h2>
<p>There are many models available in pyWitness. We’ll start with the independent observation model. To load and process the data is the same as before</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="n">dr</span><span class="o">.</span><span class="n">collapseContinuousData</span><span class="p">(</span><span class="n">column</span> <span class="o">=</span> <span class="s2">&quot;confidence&quot;</span><span class="p">,</span><span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="n">labels</span><span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
<span class="hll"><span class="n">mf</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">ModelFitIndependentObservation</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span>
</span><span class="hll"><span class="n">mf</span><span class="o">.</span><span class="n">setEqualVariance</span><span class="p">()</span>
</span><span class="hll"><span class="n">mf</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
</span></pre></div>
</td></tr></table></div>
<p>Line 9 sets the parameters for the fit. To display the fit parameters there is a function printParameters so</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="n">dr</span><span class="o">.</span><span class="n">collapseContinuousData</span><span class="p">(</span><span class="n">column</span> <span class="o">=</span> <span class="s2">&quot;confidence&quot;</span><span class="p">,</span><span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="n">labels</span><span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
<span class="n">mf</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">ModelFitIndependentObservation</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span>
<span class="hll"><span class="n">mf</span><span class="o">.</span><span class="n">printParameters</span><span class="p">()</span>
</span>
<span class="n">mf</span><span class="o">.</span><span class="n">setEqualVariance</span><span class="p">()</span>
<span class="hll"><span class="n">mf</span><span class="o">.</span><span class="n">printParameters</span><span class="p">()</span>
</span>
<span class="n">mf</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="hll"><span class="n">mf</span><span class="o">.</span><span class="n">printParameters</span><span class="p">()</span>
</span></pre></div>
</td></tr></table></div>
<p>After creating the <code class="docutils literal notranslate"><span class="pre">mf</span></code> object (line 9) the parameters are at their default values and free</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">lureMean 0.0 (free)</span>
<span class="go">lureSigma 1.0 (free)</span>
<span class="go">targetMean 1.0 (free)</span>
<span class="go">targetSigma 1.0 (free)</span>
<span class="go">lureBetweenSigma 0.0 (free)</span>
<span class="go">targetBetweenSigma 0.0 (free)</span>
<span class="go">c1 1.0 (free)</span>
<span class="go">c2 1.5 (free)</span>
<span class="go">c3 2.0 (free)</span>
</pre></div>
</div>
<p>Typically you would want to control the fit parameters. <code class="docutils literal notranslate"><span class="pre">setEqualVariance</span></code> sets some default model which is
an appropriate start so line 12 yields</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">lureMean 0.0 (fixed)</span>
<span class="go">lureSigma 1.0 (fixed targetSigma)</span>
<span class="go">targetMean 1.0 (free)</span>
<span class="go">targetSigma 1.0 (fixed)</span>
<span class="go">lureBetweenSigma 0.3 (fixed targetBetweenSigma)</span>
<span class="go">targetBetweenSigma 0.3 (free)</span>
<span class="go">c1 1.0 (free)</span>
<span class="go">c2 1.5 (free)</span>
<span class="go">c3 2.0 (free)</span>
</pre></div>
</div>
<p>Comparing these two fit parameters settings</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">lureSigma</span></code> is forced to be equal to <code class="docutils literal notranslate"><span class="pre">targetSigma</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">targetSigma</span></code> is fixed to its current value</li>
<li><code class="docutils literal notranslate"><span class="pre">lureBetweenSigma</span></code> is fixed to <code class="docutils literal notranslate"><span class="pre">targetBetweenSigma</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">targetBetweenSigma</span></code> is fixed to its current value</li>
</ul>
</div></blockquote>
<p>After running the fit the parameters are updated so the output of line 15 in the code example gives</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">lureMean 0.0 (fixed)</span>
<span class="go">lureSigma 1.0 (fixed targetSigma)</span>
<span class="go">targetMean 1.6644667559751338 (free)</span>
<span class="go">targetSigma 1.0 (fixed)</span>
<span class="go">lureBetweenSigma 0.47633248791026106 (fixed targetBetweenSigma)</span>
<span class="go">targetBetweenSigma 0.47633248791026106 (free)</span>
<span class="go">c1 1.3610178212548698 (free)</span>
<span class="go">c2 1.8627517728791307 (free)</span>
<span class="go">c3 2.5659741783090464 (free)</span>
</pre></div>
</div>
<p>There lots of ways to control the model</p>
<table border="1" class="colwidths-given docutils" id="id2">
<caption><span class="caption-text">Parameter control examples</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Command</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">mf.lureMean.value</span> <span class="pre">=</span> <span class="pre">-0.1</span></code></td>
<td>Sets the lure mean parameter to -0.1</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">mf.targetMean.fixed</span> <span class="pre">=</span> <span class="pre">True</span></code></td>
<td>Fixed the parameter so it cannot change during a fit</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">mf.lureMean.fixed</span> <span class="pre">=</span> <span class="pre">False</span></code></td>
<td>Unfixes the parameter so it will be free in a fit</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">mf.c1.set_equal(mf.c2)</span></code></td>
<td>Locks <code class="docutils literal notranslate"><span class="pre">c1</span></code> and <code class="docutils literal notranslate"><span class="pre">c2</span></code> together</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">mf.lureBetweenSigma.unset_equal()</span></code></td>
<td>Release the linking of lureBetweenSigma and targetBetweenSigma</td>
</tr>
</tbody>
</table>
<p>There are multiple fits available and they all have the same interface they differ in the construction line</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="n">dr</span><span class="o">.</span><span class="n">collapseContinuousData</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s2">&quot;confidence&quot;</span><span class="p">)</span>
<span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>

<span class="hll"><span class="n">mf_io</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">ModelFitIndependentObservation</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span>
</span><span class="hll"><span class="n">mf_br</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">ModelFitBestRest</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span>
</span><span class="hll"><span class="n">mf_en</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">ModelFitEnsemble</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span>
</span><span class="hll"><span class="n">mf_in</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">ModelFitIntegration</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span>
</span></pre></div>
</td></tr></table></div>
</div>
<div class="section" id="plotting-fit-and-models">
<h2>Plotting fit and models<a class="headerlink" href="#plotting-fit-and-models" title="Permalink to this headline">¶</a></h2>
<p>It is important to understand the performance of a given particular fit.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="n">dr</span><span class="o">.</span><span class="n">collapseContinuousData</span><span class="p">(</span><span class="n">column</span> <span class="o">=</span> <span class="s2">&quot;confidence&quot;</span><span class="p">,</span><span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="n">labels</span><span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
<span class="n">mf</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">ModelFitIndependentObservation</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span>
<span class="n">mf</span><span class="o">.</span><span class="n">setEqualVariance</span><span class="p">()</span>
<span class="n">mf</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="writing-results-to-file">
<h2>Writing results to file<a class="headerlink" href="#writing-results-to-file" title="Permalink to this headline">¶</a></h2>
<p>The internal dataframes can be written to either <code class="docutils literal notranslate"><span class="pre">csv</span></code> or <code class="docutils literal notranslate"><span class="pre">xlsx</span></code> file format for further analysis. There are four functions belonging to <code class="docutils literal notranslate"><span class="pre">DataProcessed</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">writePivotExcel</span></code> writes the pivot table to excel</li>
<li><code class="docutils literal notranslate"><span class="pre">writePivotCsv</span></code> writes the pivot table to csv</li>
<li><code class="docutils literal notranslate"><span class="pre">writeRatesExcel</span></code> writes the cummulative rates table to excel</li>
<li><code class="docutils literal notranslate"><span class="pre">writeRatesCsv</span></code> writes the cummulative rates table to csv</li>
</ul>
</div></blockquote>
<p>The string argument for the functions is the file name.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyWitness</span>
<span class="n">dr</span> <span class="o">=</span> <span class="n">pyWitness</span><span class="o">.</span><span class="n">DataRaw</span><span class="p">(</span><span class="s2">&quot;test1.csv&quot;</span><span class="p">)</span>
<span class="n">dp</span> <span class="o">=</span> <span class="n">dr</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
<span class="hll"><span class="n">dp</span><span class="o">.</span><span class="n">writePivotExcel</span><span class="p">(</span><span class="s2">&quot;test1_pivot.xlsx&quot;</span><span class="p">)</span>
</span><span class="hll"><span class="n">dp</span><span class="o">.</span><span class="n">writePivotCsv</span><span class="p">(</span><span class="s2">&quot;test1_pivot.csv&quot;</span><span class="p">)</span>
</span><span class="hll"><span class="n">dp</span><span class="o">.</span><span class="n">writeRatesExcel</span><span class="p">(</span><span class="s2">&quot;test1_rates.xlsx&quot;</span><span class="p">)</span>
</span><span class="hll"><span class="n">dp</span><span class="o">.</span><span class="n">writeRatesCsv</span><span class="p">(</span><span class="s2">&quot;test1_rates.csv&quot;</span><span class="p">)</span>
</span></pre></div>
</td></tr></table></div>
<div class="figure">
<img alt="_images/test1_pivot_excel.jpg" src="_images/test1_pivot_excel.jpg" />
</div>
<div class="figure">
<img alt="_images/test1_rates_excel.jpg" src="_images/test1_rates_excel.jpg" />
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tutorials_adv.html" class="btn btn-neutral float-right" title="Advanced tutorials" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introduction.html" class="btn btn-neutral" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Royal Holloway, University of London 2020 and University of Bristol 2020
      Last updated on Jan 30, 2021.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>